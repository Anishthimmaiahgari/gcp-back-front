{"ast":null,"code":"import axios from 'axios';\nconst CloudService = {\n  authenticateGCP: async file => {\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/authenticate-gcp`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Store authentication data\n      if (response.data.project_id) {\n        localStorage.setItem('gcp_authenticated', 'true');\n        localStorage.setItem('gcp_project_id', response.data.project_id);\n      }\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      throw new Error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to authenticate with GCP');\n    }\n  },\n  getAPIDetails: async apiName => {\n    try {\n      // Check if we're authenticated\n      if (!localStorage.getItem('gcp_authenticated')) {\n        throw new Error('Not authenticated with GCP. Please upload credentials first.');\n      }\n\n      // Fix: Remove the \"/api\" prefix from the URL\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api-details`, {\n        apiName,\n        projectId: localStorage.getItem('gcp_project_id')\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to fetch API details');\n    }\n  },\n  isGCPAuthenticated: () => {\n    return localStorage.getItem('gcp_authenticated') === 'true';\n  },\n  getGCPProjectId: () => {\n    return localStorage.getItem('gcp_project_id');\n  },\n  clearGCPAuthentication: () => {\n    localStorage.removeItem('gcp_authenticated');\n    localStorage.removeItem('gcp_project_id');\n  }\n};\nexport default CloudService;","map":{"version":3,"names":["axios","CloudService","authenticateGCP","file","formData","FormData","append","response","post","process","env","REACT_APP_API_URL","headers","data","project_id","localStorage","setItem","error","_error$response","_error$response$data","Error","getAPIDetails","apiName","getItem","projectId","_error$response2","_error$response2$data","isGCPAuthenticated","getGCPProjectId","clearGCPAuthentication","removeItem"],"sources":["C:/Users/Anish.Thimmaiahgari/gcp-cost-optimization/frontend/src/services/CloudService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst CloudService = {\r\n  authenticateGCP: async (file) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    try {\r\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/authenticate-gcp`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      \r\n      // Store authentication data\r\n      if (response.data.project_id) {\r\n        localStorage.setItem('gcp_authenticated', 'true');\r\n        localStorage.setItem('gcp_project_id', response.data.project_id);\r\n      }\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to authenticate with GCP');\r\n    }\r\n  },\r\n  \r\n  getAPIDetails: async (apiName) => {\r\n    try {\r\n      // Check if we're authenticated\r\n      if (!localStorage.getItem('gcp_authenticated')) {\r\n        throw new Error('Not authenticated with GCP. Please upload credentials first.');\r\n      }\r\n      \r\n      // Fix: Remove the \"/api\" prefix from the URL\r\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api-details`, { \r\n        apiName,\r\n        projectId: localStorage.getItem('gcp_project_id')\r\n      });\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.error || 'Failed to fetch API details');\r\n    }\r\n  },\r\n  \r\n  isGCPAuthenticated: () => {\r\n    return localStorage.getItem('gcp_authenticated') === 'true';\r\n  },\r\n  \r\n  getGCPProjectId: () => {\r\n    return localStorage.getItem('gcp_project_id');\r\n  },\r\n  \r\n  clearGCPAuthentication: () => {\r\n    localStorage.removeItem('gcp_authenticated');\r\n    localStorage.removeItem('gcp_project_id');\r\n  }\r\n};\r\n\r\nexport default CloudService;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG;EACnBC,eAAe,EAAE,MAAOC,IAAI,IAAK;IAC/B,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;IAC7B,IAAI;MACF,MAAMI,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,mBAAmB,EAAEP,QAAQ,EAAE;QAC/FQ,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;;MAEF;MACA,IAAIL,QAAQ,CAACM,IAAI,CAACC,UAAU,EAAE;QAC5BC,YAAY,CAACC,OAAO,CAAC,mBAAmB,EAAE,MAAM,CAAC;QACjDD,YAAY,CAACC,OAAO,CAAC,gBAAgB,EAAET,QAAQ,CAACM,IAAI,CAACC,UAAU,CAAC;MAClE;MAEA,OAAOP,QAAQ,CAACM,IAAI;IACtB,CAAC,CAAC,OAAOI,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACd,MAAM,IAAIC,KAAK,CAAC,EAAAF,eAAA,GAAAD,KAAK,CAACV,QAAQ,cAAAW,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBL,IAAI,cAAAM,oBAAA,uBAApBA,oBAAA,CAAsBF,KAAK,KAAI,iCAAiC,CAAC;IACnF;EACF,CAAC;EAEDI,aAAa,EAAE,MAAOC,OAAO,IAAK;IAChC,IAAI;MACF;MACA,IAAI,CAACP,YAAY,CAACQ,OAAO,CAAC,mBAAmB,CAAC,EAAE;QAC9C,MAAM,IAAIH,KAAK,CAAC,8DAA8D,CAAC;MACjF;;MAEA;MACA,MAAMb,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,cAAc,EAAE;QAChFW,OAAO;QACPE,SAAS,EAAET,YAAY,CAACQ,OAAO,CAAC,gBAAgB;MAClD,CAAC,CAAC;MAEF,OAAOhB,QAAQ,CAACM,IAAI;IACtB,CAAC,CAAC,OAAOI,KAAK,EAAE;MAAA,IAAAQ,gBAAA,EAAAC,qBAAA;MACd,MAAM,IAAIN,KAAK,CAAC,EAAAK,gBAAA,GAAAR,KAAK,CAACV,QAAQ,cAAAkB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBZ,IAAI,cAAAa,qBAAA,uBAApBA,qBAAA,CAAsBT,KAAK,KAAI,6BAA6B,CAAC;IAC/E;EACF,CAAC;EAEDU,kBAAkB,EAAEA,CAAA,KAAM;IACxB,OAAOZ,YAAY,CAACQ,OAAO,CAAC,mBAAmB,CAAC,KAAK,MAAM;EAC7D,CAAC;EAEDK,eAAe,EAAEA,CAAA,KAAM;IACrB,OAAOb,YAAY,CAACQ,OAAO,CAAC,gBAAgB,CAAC;EAC/C,CAAC;EAEDM,sBAAsB,EAAEA,CAAA,KAAM;IAC5Bd,YAAY,CAACe,UAAU,CAAC,mBAAmB,CAAC;IAC5Cf,YAAY,CAACe,UAAU,CAAC,gBAAgB,CAAC;EAC3C;AACF,CAAC;AAED,eAAe7B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}